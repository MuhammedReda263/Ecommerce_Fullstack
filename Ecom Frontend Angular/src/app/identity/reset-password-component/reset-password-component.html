<div class="vh-100 d-flex justify-content-center align-items-center bg-light">

  <div class="card shadow-lg p-4" style="width: 420px; border-radius: 20px;">
    
    <h3 class="text-center mb-3 fw-bold">Reset Password</h3>
    <p class="text-muted text-center mb-4">
      Enter your new password below to reset your account.
    </p>

    <form [formGroup]="_formGroup" (ngSubmit)="Submit()">

      <!-- New Password -->
      <div class="mb-3">
        <label class="form-label fw-semibold">New Password</label>

        <input 
          type="password"
          formControlName="newPassword"
          class="form-control p-3"
          [ngClass]="{
            'is-invalid': _newPassword?.invalid && _newPassword?.touched,
            'is-valid': _newPassword?.valid && _newPassword?.touched
          }"
          placeholder="Enter new password"
        />

        @if (_newPassword?.invalid && _newPassword?.touched) {
          <div class="invalid-feedback">
            Password must be at least 6 characters.
          </div>
        }
      </div>

      <!-- Confirm Password -->
      <div class="mb-3">
        <label class="form-label fw-semibold">Confirm Password</label>

        <input 
          type="password"
          formControlName="confirmedPassword"
          class="form-control p-3"
          [ngClass]="{
            'is-invalid': _confirmedPassword?.invalid && _confirmedPassword?.touched,
            'is-valid': _confirmedPassword?.valid && _confirmedPassword?.touched
          }"
          placeholder="Confirm new password"
        />

        @if (_confirmedPassword?.errors?.['required'] && _confirmedPassword?.touched) {
          <div class="invalid-feedback">This field is required</div>
        }

        @if (_confirmedPassword?.errors?.['minlength'] && _confirmedPassword?.touched) {
          <div class="invalid-feedback">Minimum 6 characters required</div>
        }

        @if (_confirmedPassword?.errors?.['notMatch'] && _confirmedPassword?.touched) {
          <div class="invalid-feedback">Passwords do not match</div>
        }
      </div>

      <button 
        class="btn btn-primary w-100 py-2 mt-2 fw-semibold"
        type="submit"
        [disabled]="_loading"
      >
        @if (!_loading) {
          Reset Password
        }
        @if (_loading) {
          <span class="spinner-border spinner-border-sm me-2"></span>
          Processing...
        }
      </button>

    </form>

    <div class="text-center mt-3">
      <a routerLink="/account/login" class="text-decoration-none">
        Back to Login
      </a>
    </div>

  </div>
</div>
